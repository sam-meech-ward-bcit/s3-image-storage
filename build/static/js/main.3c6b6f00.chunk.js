(this.webpackJsonpinstasam=this.webpackJsonpinstasam||[]).push([[0],{58:function(t,e,n){t.exports=n(90)},63:function(t,e,n){},90:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"login",(function(){return $})),n.d(a,"logout",(function(){return q})),n.d(a,"signUp",(function(){return H})),n.d(a,"savePost",(function(){return Q})),n.d(a,"saveComment",(function(){return V})),n.d(a,"likePost",(function(){return X})),n.d(a,"getPosts",(function(){return Y})),n.d(a,"getComments",(function(){return Z})),n.d(a,"me",(function(){return _}));var r=n(0),o=n.n(r),c=n(13),s=n.n(c),i=(n(63),n(11)),u=n(10),l=n.n(u),p=n(17),m=n(109),d=n(23),f=n(111),h=n(112),g=n(113),v=n(114),b=n(48),w=n.n(b),O=Object(m.a)((function(t){return{grow:{flexGrow:1},menuButton:{marginRight:t.spacing(2)},title:Object(d.a)({display:"none",textAlign:"center"},t.breakpoints.up("sm"),{display:"block"})}}));function j(t){var e=O(),n=o.a.useState(null),a=Object(i.a)(n,2);a[0],a[1];return o.a.createElement("div",{className:e.grow},o.a.createElement(f.a,{position:"static"},o.a.createElement(h.a,null,o.a.createElement(g.a,{"aria-label":"add a new post",onClick:t.newPost,color:"inherit"},o.a.createElement(w.a,null)),o.a.createElement(v.a,{className:e.title,variant:"h6",noWrap:!0},"AppName"))))}var E=n(115),k=n(116),y=(n(3),n(28)),x=Object(m.a)((function(t){return{root:{width:600},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:y.a[500]},textField:{flexGrow:1},description:{marginBottom:10},mainCardContent:{paddingTop:0}}}));function S(t){var e=x(t),n=t.post;return o.a.createElement(E.a,{className:"".concat(e.root," ").concat(t.className)},o.a.createElement(k.a,{className:e.media,image:n}))}var C=n(117),I=n(49),N=Object(m.a)((function(t){return{root:{width:600},input:{display:"none"}}}));function A(t){var e=N(),n=Object(r.useState)({}),a=Object(i.a)(n,2),c=a[0],s=a[1],u=Object(r.useState)(""),l=Object(i.a)(u,2),p=l[0];l[1];return o.a.createElement(E.a,{className:e.root},o.a.createElement(I.a,{images:c,setImages:s,allowCrop:!1}),o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t.onSubmit({images:c,description:p})}},o.a.createElement(C.a,{type:"submit"},"Post")))}var P=Object(m.a)((function(t){return{posts:{display:"flex",flexDirection:"column",alignItems:"center"},post:{margin:"10px 0"}}}));function T(t){var e=Object(r.useState)([]),n=Object(i.a)(e,2),a=n[0],c=n[1],s=Object(r.useState)(!1),u=Object(i.a)(s,2),m=u[0],d=u[1],f=P(t);function h(){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(l.a.mark((function e(){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getPosts();case 2:n=e.sent,console.log(n),c(n.posts),console.log(n.posts);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(r.useEffect)((function(){h()}),[]);var v=function(){var e=Object(p.a)(l.a.mark((function e(n){var a,r,o,c,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in a=n.images,r=n.description,o=[],a)o.push(a[c]);return e.next=5,t.savePost({images:o,description:r});case 5:s=e.sent,console.log(s),d(!1),h();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=a.map((function(t){return o.a.createElement(S,{key:t,className:f.post,post:t})}));return o.a.createElement("div",null,o.a.createElement(j,{newPost:function(){d((function(t){return!t}))}}),o.a.createElement("div",{className:f.posts},m?o.a.createElement(A,{onSubmit:v}):b))}var F=n(29),B=n(21),D=n.n(B),J=n(121),W=n(50),G=n.n(W);function U(){return localStorage.getItem("token")}function z(t){localStorage.setItem("token",t)}function L(){var t,e=U();if(!e)return null;try{t=G()(e)}catch(n){console.log(n)}return t}function M(){var t=U();return t?{Authorization:"Bearer ".concat(t)}:{}}function R(t){var e=t.method,n=t.path,a=t.params;console.log(M());var r=Object(F.a)({},M(),{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"});return console.log("headers",r),"get"==e?D.a[e](n,{headers:r}):D.a[e](n,a,{headers:r})}var $=function(t){var e=t.email,n=t.password;return console.log(e,n),R({method:"post",path:"/api/users/login",params:{user:{email:e,password:n}}}).then((function(t){var e=t.data.accessToken;console.log(e),z(e);var n=L();return n||null}))},q=function(){return localStorage.removeItem("token"),R({method:"post",path:"/api/users/logout"}).then((function(t){return t.data}))},H=function(t){var e=t.email,n=t.password,a=t.username,r=t.image;console.log(e,n,r);var o=new FormData;return o.append("avatar",r),o.append("user",JSON.stringify({email:e,password:n,username:a,fullName:"Full name"})),D.a.post("/api/users",o,{headers:Object(F.a)({"Content-Type":"multipart/form-data"},M())}).then((function(t){var e=t.data.accessToken;console.log(e),z(e);var n=L();return n||null}))},K=function(t,e){for(var n=t.split(","),a=n[0].match(/:(.*?);/)[1],r=atob(n[1]),o=r.length,c=new Uint8Array(o);o;)c[o-1]=r.charCodeAt(o-1),o-=1;return new File([c],e||Object(J.a)(),{type:a})};function Q(t){var e=t.images,n=t.description,a=new FormData;return e.map(K).forEach((function(t){return a.append("images",t)})),a.append("description",n),D.a.post("/api/posts",a,{headers:Object(F.a)({"Content-Type":"multipart/form-data"},M())}).then((function(t){return t.data}))}function V(t){var e=t.postId,n=t.message;return R({method:"post",path:"/api/posts/".concat(e,"/comments"),params:{message:n,postId:e}}).then((function(t){return t.data}))}function X(t){var e=t.postId;return R({method:"post",path:"/api/posts/".concat(e,"/likes"),params:{postId:e}}).then((function(t){return t.data}))}function Y(){return R({method:"get",path:"/api/posts"}).then((function(t){return t.data}))}function Z(t){var e=t.postId;return R({method:"get",path:"/api/posts/".concat(e,"/comments")}).then((function(t){return t.data}))}function _(){return tt.apply(this,arguments)}function tt(){return(tt=Object(p.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=L()){t.next=3;break}return t.abrupt("return",null);case 3:return t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var et=n(120),nt=n(51),at=n(118),rt=n(119);function ot(t){var e,n=(e=t.pallet,Object(nt.a)({backgroundColor:e.light?"white":"black"}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(at.a,{theme:n},o.a.createElement(rt.a,null),t.children))}var ct=function(){var t=Object(r.useState)(null),e=Object(i.a)(t,2),n=e[0],c=(e[1],Object(et.a)("(prefers-color-scheme: dark)"));return o.a.createElement(ot,{pallet:c?"dark":"light"},n?o.a.createElement("h2",null,n,"..."):o.a.createElement(T,a))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(ct,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.3c6b6f00.chunk.js.map