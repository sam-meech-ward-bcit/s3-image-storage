(this.webpackJsonpinstasam=this.webpackJsonpinstasam||[]).push([[0],{58:function(e,t,a){e.exports=a(90)},63:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"savePost",(function(){return M})),a.d(n,"getPosts",(function(){return R})),a.d(n,"appName",(function(){return U}));var r=a(0),o=a.n(r),c=a(13),i=a.n(c),s=(a(63),a(10)),l=a(11),u=a.n(l),p=a(28),m=a(109),d=a(21),f=a(111),h=a(112),g=a(113),b=a(114),v=a(48),O=a.n(v),w=Object(m.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(d.a)({display:"none",textAlign:"center"},e.breakpoints.up("sm"),{display:"block"})}}));function j(e){var t=w(),a=o.a.useState(null),n=Object(s.a)(a,2);n[0],n[1];return o.a.createElement("div",{className:t.grow},o.a.createElement(f.a,{position:"static"},o.a.createElement(h.a,null,o.a.createElement(g.a,{"aria-label":"add a new post",onClick:e.newPost,color:"inherit"},o.a.createElement(O.a,null)),o.a.createElement(b.a,{className:t.title,variant:"h6",noWrap:!0},e.appName))))}var E=a(115),k=a(116),x=(a(3),a(26)),y=Object(m.a)((function(e){return{root:{width:600},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:x.a[500]},textField:{flexGrow:1},description:{marginBottom:10},mainCardContent:{paddingTop:0}}}));function N(e){var t=y(e),a=e.post;return o.a.createElement(E.a,{className:"".concat(t.root," ").concat(e.className)},o.a.createElement(k.a,{className:t.media,image:a}))}var S=a(117),C=a(49),A=Object(m.a)((function(e){return{root:{width:600},input:{display:"none"}}}));function P(e){var t=A(),a=Object(r.useState)({}),n=Object(s.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)(""),u=Object(s.a)(l,2),p=u[0];u[1];return o.a.createElement(E.a,{className:t.root},o.a.createElement(C.a,{images:c,setImages:i,allowCrop:!1}),o.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.onSubmit({images:c,description:p})}},o.a.createElement(S.a,{type:"submit"},"Post")))}var B=Object(m.a)((function(e){return{posts:{display:"flex",flexDirection:"column",alignItems:"center"},post:{margin:"10px 0"}}}));function F(e){var t=Object(r.useState)([]),a=Object(s.a)(t,2),n=a[0],c=a[1],i=Object(r.useState)(""),l=Object(s.a)(i,2),m=l[0],d=l[1],f=Object(r.useState)(!1),h=Object(s.a)(f,2),g=h[0],b=h[1],v=B(e);function O(){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(u.a.mark((function t(){var a,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getPosts();case 3:return a=t.sent,console.log(a),c(a.posts),console.log(a.posts),t.next=9,e.appName();case 9:n=t.sent,d(n.name),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),alert(JSON.stringify(t.t0));case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))).apply(this,arguments)}Object(r.useEffect)((function(){O()}),[]);var E=function(){var t=Object(p.a)(u.a.mark((function t(a){var n,r,o,c,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c in n=a.images,r=a.description,o=[],n)o.push(n[c]);return t.prev=3,t.next=6,e.savePost({images:o,description:r});case 6:i=t.sent,console.log(i),b(!1),O(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),alert(JSON.stringify(t.t0));case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}(),k=n.map((function(e){return o.a.createElement(N,{key:e,className:v.post,post:e,onClick:function(){return window.open(e,"_blank")}})}));return o.a.createElement("div",null,o.a.createElement(j,{newPost:function(){b((function(e){return!e}))},appName:m}),o.a.createElement("div",{className:v.posts},g?o.a.createElement(P,{onSubmit:E}):k))}var I=a(29),J=a(27),T=a.n(J),D=a(121);a(50);function W(){return localStorage.getItem("token")}function G(){var e=W();return e?{Authorization:"Bearer ".concat(e)}:{}}function z(e){var t=e.method,a=e.path,n=e.params;console.log(G());var r=Object(I.a)({},G(),{"Access-Control-Allow-Origin":"*",Accept:"application/json","Content-Type":"application/json"});return console.log("headers",r),"get"==t?T.a[t](a,{headers:r}):T.a[t](a,n,{headers:r})}var L=function(e,t){for(var a=e.split(","),n=a[0].match(/:(.*?);/)[1],r=atob(a[1]),o=r.length,c=new Uint8Array(o);o;)c[o-1]=r.charCodeAt(o-1),o-=1;return new File([c],t||Object(D.a)(),{type:n})};function M(e){var t=e.images,a=e.description,n=new FormData;return t.map(L).forEach((function(e){return n.append("images",e)})),n.append("description",a),T.a.post("/api/posts",n,{headers:Object(I.a)({"Content-Type":"multipart/form-data"},G())}).then((function(e){return e.data}))}function R(){return z({method:"get",path:"/api/posts"}).then((function(e){return e.data}))}function U(){return z({method:"get",path:"/api/appName"}).then((function(e){return e.data}))}var $=a(120),_=a(51),q=a(118),H=a(119);function K(e){var t,a=(t=e.pallet,Object(_.a)({backgroundColor:t.light?"white":"black"}));return o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,{theme:a},o.a.createElement(H.a,null),e.children))}var Q=function(){var e=Object(r.useState)(null),t=Object(s.a)(e,2),a=t[0],c=(t[1],Object($.a)("(prefers-color-scheme: dark)"));return o.a.createElement(K,{pallet:c?"dark":"light"},a?o.a.createElement("h2",null,a,"..."):o.a.createElement(F,n))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[58,1,2]]]);
//# sourceMappingURL=main.3e81a8b8.chunk.js.map