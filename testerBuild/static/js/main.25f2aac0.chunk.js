(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{74:function(t,e,r){},76:function(t,e,r){},99:function(t,e,r){"use strict";r.r(e);var n=r(3),a=r(0),c=r.n(a),s=r(11),o=r.n(s),i=(r(74),r(7)),u=r.n(i),p=r(12),l=r(15),d=(r(76),r(30)),f=r(28),j=r.n(f);function b(t,e){var r=function(t,e){function r(t){var e=t.response&&t.response.status||t.code;return{status:e,message:{502:"Can reach nginx, but not the server. It's probably not currently running on port 8080",ECONNABORTED:"Couldn't connect to the instance's nginx server"}[e]}}function n(){return(n=Object(p.a)(u.a.mark((function t(n){var a,c,s,o=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",c="".concat(n)+(e?"?forward=".concat(e):""),console.log(c),t.prev=3,t.next=6,j.a[a](c,{timeout:1e4});case 6:return s=t.sent,t.abrupt("return",s.data);case 10:return t.prev=10,t.t0=t.catch(3),t.abrupt("return",{error:Object(d.a)(Object(d.a)({},t.t0),r(t.t0))});case 13:case"end":return t.stop()}}),t,null,[[3,10]])})))).apply(this,arguments)}function a(){return(a=Object(p.a)(u.a.mark((function n(a){var c,s,o,i=arguments;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=i.length>1&&void 0!==i[1]?i[1]:"get",s="http://".concat(t).concat(a)+(e?"?forward=".concat(e):""),console.log(s),n.prev=3,n.next=6,j.a[c](s,{timeout:1e4});case 6:return o=n.sent,n.abrupt("return",o.data);case 10:return n.prev=10,n.t0=n.catch(3),n.abrupt("return",{error:Object(d.a)(Object(d.a)({},n.t0),r(n.t0))});case 13:case"end":return n.stop()}}),n,null,[[3,10]])})))).apply(this,arguments)}return{makeRequest:function(t){return a.apply(this,arguments)},makeLocalRequest:function(t){return n.apply(this,arguments)}}}(t,e),n=r.makeRequest,a=r.makeLocalRequest;function c(){return(c=Object(p.a)(u.a.mark((function t(e){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a(e);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function s(){return(s=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/addresses");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function o(){return(o=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/details");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function i(){return(i=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/securityGroups");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function l(){return(l=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/thisRouteTable");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/vpcs");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/subnets");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function h(){return(h=Object(p.a)(u.a.mark((function t(e){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/service/".concat(e));case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function m(){return(m=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/endpoints");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){return(x=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/volumes");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function O(){return(O=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n("/testBucket");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{get:function(t){return c.apply(this,arguments)},getElasticIp:function(){return s.apply(this,arguments)},getDetails:function(){return o.apply(this,arguments)},getSecurityGroups:function(){return i.apply(this,arguments)},getThisRouteTable:function(){return l.apply(this,arguments)},getVpc:function(){return f.apply(this,arguments)},getSubnets:function(){return b.apply(this,arguments)},getService:function(t){return h.apply(this,arguments)},getEndpoints:function(){return m.apply(this,arguments)},testBucket:function(){return O.apply(this,arguments)},getVolumes:function(){return x.apply(this,arguments)}}}function h(t){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(u.a.mark((function t(e){var r,n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={},t.t0=u.a.keys(e);case 2:if((t.t1=t.t0()).done){t.next=9;break}return n=t.t1.value,t.next=6,b().get(e[n]);case 6:r[n]=t.sent,t.next=2;break;case 9:return t.abrupt("return",r);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var x=r(34),O=r(128),v=r(4),g=r(100),y=r(132),k=r(133),w=r(134),S=r(135),P=r(136),N=r(137),I=r(61),B=r.n(I),G=Object(O.a)((function(t){return{root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},expand:{transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},sgPaper:{padding:10}}}));function C(t,e){return Object(n.jsx)(g.a,{elevation:3,children:t.map((function(t,r){return t.map((function(t,a){return Object(n.jsxs)(y.a,{variant:"outlined",className:e.sgPaper,children:[Object(n.jsxs)(k.a,{children:["Group ",r,", Permission ",a,":"]}),Object(n.jsxs)("ul",{children:[Object(n.jsxs)("li",{children:["From Port ",t.fromPort]}),Object(n.jsxs)("li",{children:["To Port ",t.fromPort]}),Object(n.jsxs)("li",{children:["Cidr ",t.cidr]})]})]},r+""+a)}))}))})}function F(t){return{fromPort:t.FromPort,toPort:t.ToPort,cidr:t.IpRanges[0].CidrIp}}function T(t){return t.IpPermissions.map(F)}function A(t){var e=t.data,r=t.expectedGroups,c=G(),s=Object(a.useState)(!1),o=Object(l.a)(s,2),i=o[0],u=o[1];if(!e)return Object(n.jsx)("p",{});var p=[];e.error&&p.push(Object(n.jsxs)(k.a,{children:["\u274c ",e.error.message]}));var d=e.SecurityGroups&&e.SecurityGroups.map(T),f=d?d.flat():[];return p=r.map((function(t,e){return Object(n.jsxs)(k.a,{children:[f.find((function(e){return e.fromPort===t.fromPort&&e.toPort===t.toPort&&e.cidr===t.cidr}))?"\u2705":"\u274c"," Security group from ",t.cidr," on ports ",t.fromPort," to ",t.toPort]},"group".concat(e))})),Object(n.jsxs)(y.a,{className:c.root,variant:"outlined",children:[Object(n.jsxs)(w.a,{children:[Object(n.jsx)(k.a,{className:c.title,color:"textSecondary",gutterBottom:!0,children:"Security Groups"}),p]}),Object(n.jsxs)(S.a,{disableSpacing:!0,children:[Object(n.jsx)(k.a,{children:"Show Groups"}),Object(n.jsx)(P.a,{className:Object(v.a)(c.expand,Object(x.a)({},c.expandOpen,i)),onClick:function(){u(!i)},"aria-expanded":i,"aria-label":"show more",children:Object(n.jsx)(B.a,{})})]}),Object(n.jsx)(N.a,{in:i,timeout:"auto",unmountOnExit:!0,children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(k.a,{paragraph:!0,children:"Security Groups:"}),C(d||[],c)]})})]})}var E=Object(O.a)((function(t){return{root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}}));function R(t){var e=t.data,r=t.serviceName,a=E();if(!e)return Object(n.jsx)("p",{});var c=[];e.error&&c.push(Object(n.jsxs)(k.a,{children:["\u274c ",e.error.message]})),console.log(e);var s=e.ActiveState,o=e.SubState;return c.push(Object(n.jsxs)(k.a,{children:["active"!==s?"\u274c":"\u2705"," ",r," is a service in an an active state: ",Object(n.jsx)("em",{children:s})]},"service-1")),c.push(Object(n.jsxs)(k.a,{children:["running"!==o?"\u274c":"\u2705"," ",r," is a service in an a running substate: ",Object(n.jsx)("em",{children:o})]},"service-2")),Object(n.jsx)(y.a,{className:a.root,variant:"outlined",children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(k.a,{className:a.title,color:"textSecondary",gutterBottom:!0,children:"Service"}),c]})})}var L=Object(O.a)((function(t){return{root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}}));function q(t){var e=t.data,r=t.bucketName,a=L();if(!e)return Object(n.jsx)("p",{});var c=[];e.error&&c.push(Object(n.jsxs)(k.a,{children:["\u274c ",e.error.message]})),console.log("S3",e);var s=e.date;return c.push(Object(n.jsxs)(k.a,{children:[s?"\u2705":"\u274c"," File uploaded and downloaded to ",r," at ",s]},"bucket-1")),Object(n.jsx)(y.a,{className:a.root,variant:"outlined",children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(k.a,{className:a.title,color:"textSecondary",gutterBottom:!0,children:"S3"}),c]})})}var z=Object(O.a)((function(t){return{root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}}));function J(t){var e=t.data,r=z();if(!e)return Object(n.jsx)("p",{});var a=[];return e.error&&a.push(Object(n.jsxs)(k.a,{children:["\u274c ",e.error.message]})),a.push(Object(n.jsxs)(k.a,{children:[e.InstanceProfileArn?"\u2705":"\u274c","An IAM role has been attached to this instance ",e.InstanceProfileArn]},"1")),Object(n.jsx)(y.a,{className:r.root,variant:"outlined",children:Object(n.jsxs)(w.a,{children:[Object(n.jsx)(k.a,{className:r.title,color:"textSecondary",gutterBottom:!0,children:"IAM"}),a]})})}r(140);var M=r(138);Object(O.a)((function(t){return{root:{"& > *":{margin:t.spacing(1),width:"25ch"}}}}));var W=r(139);var D=function(){var t=function(t,e){var r=Object(a.useState)((function(){try{var r=window.localStorage.getItem(t);return r?JSON.parse(r):e}catch(n){return console.log(n),e}})),n=Object(l.a)(r,2),c=n[0],s=n[1];return[c,function(e){try{var r=e instanceof Function?e(c):e;s(r),window.localStorage.setItem(t,JSON.stringify(r))}catch(n){console.log(n)}}]}("publicIp",""),e=Object(l.a)(t,2),r=(e[0],e[1],Object(a.useState)({})),c=Object(l.a)(r,2),s=c[0],o=c[1],i=Object(a.useState)("unsearched"),d=Object(l.a)(i,2),f=d[0],b=d[1],m={service:"/api/status/service",securityGroups:"/api/status/securityGroups",iaminfo:"/api/status/iaminfo",s3:"/api/status/s3",general:"/api/status"},x=function(){var t=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b("loading"),t.next=3,h(m);case 3:e=t.sent,console.log(e),o(e),b("loaded");case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),O=function(){var t=Object(p.a)(u.a.mark((function t(){var e;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return b("loading"),t.prev=1,t.next=4,j.a.post("http://52.60.55.210",{host:window.location.host});case 4:if(e=t.sent,b("loaded"),!e.error){t.next=9;break}return alert("Error"),t.abrupt("return");case 9:t.next=17;break;case 11:return t.prev=11,t.t0=t.catch(1),b("loaded"),console.log(t.t0),alert("Error"),t.abrupt("return");case 17:alert("\ud83e\udd17");case 18:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{className:"App",children:["loading"!==f&&Object(n.jsx)(M.a,{variant:"contained",color:"primary",onClick:x,children:"Submit"}),"loading"===f&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h1",{children:"Loading..."})," ",Object(n.jsx)(W.a,{})]}),"loaded"===f&&Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("h2",{children:"Main Server:"}),Object(n.jsx)(J,{data:s.iaminfo}),Object(n.jsx)(A,{data:s.securityGroups,expectedGroups:[{fromPort:4040,toPort:4040,cidr:"0.0.0.0/0"},{fromPort:22,toPort:22,cidr:"0.0.0.0/0"}]}),Object(n.jsx)(R,{data:s.service,serviceName:"nodeserver.service"}),Object(n.jsx)(q,{data:s.s3,bucketName:s.general.env.bucketName}),Object(n.jsx)("br",{}),Object(n.jsx)("p",{children:"This assignment is pass or fail. You need all green checkmarks to pass."}),Object(n.jsx)("p",{children:"Only click this button if all the checkmarks are green."}),Object(n.jsx)(M.a,{variant:"contained",color:"primary",onClick:function(){return O()},children:"Submit Token"})]})]})},V=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,141)).then((function(e){var r=e.getCLS,n=e.getFID,a=e.getFCP,c=e.getLCP,s=e.getTTFB;r(t),n(t),a(t),c(t),s(t)}))};o.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(D,{})}),document.getElementById("root")),V()}},[[99,1,2]]]);
//# sourceMappingURL=main.25f2aac0.chunk.js.map